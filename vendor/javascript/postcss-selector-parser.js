// postcss-selector-parser@6.0.10 downloaded from https://ga.jspm.io/npm:postcss-selector-parser@6.0.10/dist/index.js

import{_ as e,e as t,a as r,b as n}from"../_/c84e5f75.js";import*as o from"cssesc";import i from"./util/index.js";import"./util/unesc.js";import"util-deprecate";var s={};s.__esModule=true;s.default=void 0;var a=_interopRequireDefault$f(e);var u=_interopRequireWildcard$3(t);function _getRequireWildcardCache$3(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;_getRequireWildcardCache$3=function _getRequireWildcardCache(){return e};return e}function _interopRequireWildcard$3(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=_getRequireWildcardCache$3();if(t&&t.has(e))return t.get(e);var r={};var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;t&&t.set(e,r);return r}function _interopRequireDefault$f(e){return e&&e.__esModule?e:{default:e}}function _createForOfIteratorHelperLoose(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:true}:{done:false,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r=e[Symbol.iterator]();return r.next.bind(r)}function _unsupportedIterableToArray(e,t){if(e){if("string"===typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties$3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function _createClass$3(e,t,r){t&&_defineProperties$3(e.prototype,t);r&&_defineProperties$3(e,r);return e}function _inheritsLoose$b(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$b(e,t)}function _setPrototypeOf$b(e,t){_setPrototypeOf$b=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$b(e,t)}var c=function(e){_inheritsLoose$b(Container,e);function Container(t){var r;r=e.call(this,t)||this;r.nodes||(r.nodes=[]);return r}var t=Container.prototype;t.append=function append(e){e.parent=this;this.nodes.push(e);return this};t.prepend=function prepend(e){e.parent=this;this.nodes.unshift(e);return this};t.at=function at(e){return this.nodes[e]};t.index=function index(e){return"number"===typeof e?e:this.nodes.indexOf(e)};t.removeChild=function removeChild(e){e=this.index(e);this.at(e).parent=void 0;this.nodes.splice(e,1);var t;for(var r in this.indexes){t=this.indexes[r];t>=e&&(this.indexes[r]=t-1)}return this};t.removeAll=function removeAll(){for(var e,t=_createForOfIteratorHelperLoose(this.nodes);!(e=t()).done;){var r=e.value;r.parent=void 0}this.nodes=[];return this};t.empty=function empty(){return this.removeAll()};t.insertAfter=function insertAfter(e,t){t.parent=this;var r=this.index(e);this.nodes.splice(r+1,0,t);t.parent=this;var n;for(var o in this.indexes){n=this.indexes[o];r<=n&&(this.indexes[o]=n+1)}return this};t.insertBefore=function insertBefore(e,t){t.parent=this;var r=this.index(e);this.nodes.splice(r,0,t);t.parent=this;var n;for(var o in this.indexes){n=this.indexes[o];n<=r&&(this.indexes[o]=n+1)}return this};t._findChildAtPosition=function _findChildAtPosition(e,t){var r=void 0;this.each((function(n){if(n.atPosition){var o=n.atPosition(e,t);if(o){r=o;return false}}else if(n.isAtPosition(e,t)){r=n;return false}}));return r}
/**
   * Return the most specific node at the line and column number given.
   * The source location is based on the original parsed location, locations aren't
   * updated as selector nodes are mutated.
   * 
   * Note that this location is relative to the location of the first character
   * of the selector, and not the location of the selector in the overall document
   * when used in conjunction with postcss.
   *
   * If not found, returns undefined.
   * @param {number} line The line number of the node to find. (1-based index)
   * @param {number} col  The column number of the node to find. (1-based index)
   */;t.atPosition=function atPosition(e,t){return this.isAtPosition(e,t)?this._findChildAtPosition(e,t)||this:void 0};t._inferEndPosition=function _inferEndPosition(){if(this.last&&this.last.source&&this.last.source.end){this.source=this.source||{};this.source.end=this.source.end||{};Object.assign(this.source.end,this.last.source.end)}};t.each=function each(e){this.lastEach||(this.lastEach=0);this.indexes||(this.indexes={});this.lastEach++;var t=this.lastEach;this.indexes[t]=0;if(this.length){var r,n;while(this.indexes[t]<this.length){r=this.indexes[t];n=e(this.at(r),r);if(false===n)break;this.indexes[t]+=1}delete this.indexes[t];return false!==n&&void 0}};t.walk=function walk(e){return this.each((function(t,r){var n=e(t,r);false!==n&&t.length&&(n=t.walk(e));if(false===n)return false}))};t.walkAttributes=function walkAttributes(e){var t=this;return this.walk((function(r){if(r.type===u.ATTRIBUTE)return e.call(t,r)}))};t.walkClasses=function walkClasses(e){var t=this;return this.walk((function(r){if(r.type===u.CLASS)return e.call(t,r)}))};t.walkCombinators=function walkCombinators(e){var t=this;return this.walk((function(r){if(r.type===u.COMBINATOR)return e.call(t,r)}))};t.walkComments=function walkComments(e){var t=this;return this.walk((function(r){if(r.type===u.COMMENT)return e.call(t,r)}))};t.walkIds=function walkIds(e){var t=this;return this.walk((function(r){if(r.type===u.ID)return e.call(t,r)}))};t.walkNesting=function walkNesting(e){var t=this;return this.walk((function(r){if(r.type===u.NESTING)return e.call(t,r)}))};t.walkPseudos=function walkPseudos(e){var t=this;return this.walk((function(r){if(r.type===u.PSEUDO)return e.call(t,r)}))};t.walkTags=function walkTags(e){var t=this;return this.walk((function(r){if(r.type===u.TAG)return e.call(t,r)}))};t.walkUniversals=function walkUniversals(e){var t=this;return this.walk((function(r){if(r.type===u.UNIVERSAL)return e.call(t,r)}))};t.split=function split(e){var t=this;var r=[];return this.reduce((function(n,o,i){var s=e.call(t,o);r.push(o);if(s){n.push(r);r=[]}else i===t.length-1&&n.push(r);return n}),[])};t.map=function map(e){return this.nodes.map(e)};t.reduce=function reduce(e,t){return this.nodes.reduce(e,t)};t.every=function every(e){return this.nodes.every(e)};t.some=function some(e){return this.nodes.some(e)};t.filter=function filter(e){return this.nodes.filter(e)};t.sort=function sort(e){return this.nodes.sort(e)};t.toString=function toString(){return this.map(String).join("")};_createClass$3(Container,[{key:"first",get:function get(){return this.at(0)}},{key:"last",get:function get(){return this.at(this.length-1)}},{key:"length",get:function get(){return this.nodes.length}}]);return Container}(a.default);s.default=c;s=s.default;var l=s;var f={};f.__esModule=true;f.default=void 0;var p=_interopRequireDefault$e(l);var h=t;function _interopRequireDefault$e(e){return e&&e.__esModule?e:{default:e}}function _defineProperties$2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function _createClass$2(e,t,r){t&&_defineProperties$2(e.prototype,t);r&&_defineProperties$2(e,r);return e}function _inheritsLoose$a(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$a(e,t)}function _setPrototypeOf$a(e,t){_setPrototypeOf$a=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$a(e,t)}var d=function(e){_inheritsLoose$a(Root,e);function Root(t){var r;r=e.call(this,t)||this;r.type=h.ROOT;return r}var t=Root.prototype;t.toString=function toString(){var e=this.reduce((function(e,t){e.push(String(t));return e}),[]).join(",");return this.trailingComma?e+",":e};t.error=function error(e,t){return this._error?this._error(e,t):new Error(e)};_createClass$2(Root,[{key:"errorGenerator",set:function set(e){this._error=e}}]);return Root}(p.default);f.default=d;f=f.default;var v=f;var _={};_.__esModule=true;_.default=void 0;var S=_interopRequireDefault$d(l);var y=t;function _interopRequireDefault$d(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose$9(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$9(e,t)}function _setPrototypeOf$9(e,t){_setPrototypeOf$9=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$9(e,t)}var T=function(e){_inheritsLoose$9(Selector,e);function Selector(t){var r;r=e.call(this,t)||this;r.type=y.SELECTOR;return r}return Selector}(S.default);_.default=T;_=_.default;var P=_;var b="default"in o?o.default:o;var O={};O.__esModule=true;O.default=void 0;var k=_interopRequireDefault$c(b);var g=i;var m=_interopRequireDefault$c(e);var E=t;function _interopRequireDefault$c(e){return e&&e.__esModule?e:{default:e}}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function _createClass$1(e,t,r){t&&_defineProperties$1(e.prototype,t);r&&_defineProperties$1(e,r);return e}function _inheritsLoose$8(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$8(e,t)}function _setPrototypeOf$8(e,t){_setPrototypeOf$8=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$8(e,t)}var w=function(e){_inheritsLoose$8(ClassName,e);function ClassName(t){var r;r=e.call(this,t)||this;r.type=E.CLASS;r._constructed=true;return r}var t=ClassName.prototype;t.valueToString=function valueToString(){return"."+e.prototype.valueToString.call(this)};_createClass$1(ClassName,[{key:"value",get:function get(){return this._value},set:function set(e){if(this._constructed){var t=(0,k.default)(e,{isIdentifier:true});if(t!==e){(0,g.ensureObject)(this,"raws");this.raws.value=t}else this.raws&&delete this.raws.value}this._value=e}}]);return ClassName}(m.default);O.default=w;O=O.default;var D=O;var L={};L.__esModule=true;L.default=void 0;var I=_interopRequireDefault$b(e);var $=t;function _interopRequireDefault$b(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose$7(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$7(e,t)}function _setPrototypeOf$7(e,t){_setPrototypeOf$7=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$7(e,t)}var R=function(e){_inheritsLoose$7(Comment,e);function Comment(t){var r;r=e.call(this,t)||this;r.type=$.COMMENT;return r}return Comment}(I.default);L.default=R;L=L.default;var q=L;var C={};C.__esModule=true;C.default=void 0;var N=_interopRequireDefault$a(e);var A=t;function _interopRequireDefault$a(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose$6(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$6(e,t)}function _setPrototypeOf$6(e,t){_setPrototypeOf$6=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$6(e,t)}var x=function(e){_inheritsLoose$6(ID,e);function ID(t){var r;r=e.call(this,t)||this;r.type=A.ID;return r}var t=ID.prototype;t.valueToString=function valueToString(){return"#"+e.prototype.valueToString.call(this)};return ID}(N.default);C.default=x;C=C.default;var F=C;var j={};j.__esModule=true;j.default=void 0;var M=_interopRequireDefault$9(r);var W=t;function _interopRequireDefault$9(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose$5(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$5(e,t)}function _setPrototypeOf$5(e,t){_setPrototypeOf$5=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$5(e,t)}var Y=function(e){_inheritsLoose$5(Tag,e);function Tag(t){var r;r=e.call(this,t)||this;r.type=W.TAG;return r}return Tag}(M.default);j.default=Y;j=j.default;var U=j;var B={};B.__esModule=true;B.default=void 0;var G=_interopRequireDefault$8(e);var Q=t;function _interopRequireDefault$8(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose$4(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$4(e,t)}function _setPrototypeOf$4(e,t){_setPrototypeOf$4=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$4(e,t)}var V=function(e){_inheritsLoose$4(String,e);function String(t){var r;r=e.call(this,t)||this;r.type=Q.STRING;return r}return String}(G.default);B.default=V;B=B.default;var z=B;var H={};H.__esModule=true;H.default=void 0;var J=_interopRequireDefault$7(l);var K=t;function _interopRequireDefault$7(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose$3(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$3(e,t)}function _setPrototypeOf$3(e,t){_setPrototypeOf$3=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$3(e,t)}var X=function(e){_inheritsLoose$3(Pseudo,e);function Pseudo(t){var r;r=e.call(this,t)||this;r.type=K.PSEUDO;return r}var t=Pseudo.prototype;t.toString=function toString(){var e=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),e,this.rawSpaceAfter].join("")};return Pseudo}(J.default);H.default=X;H=H.default;var Z=H;var ee={};ee.__esModule=true;ee.default=void 0;var te=_interopRequireDefault$6(r);var re=t;function _interopRequireDefault$6(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose$2(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$2(e,t)}function _setPrototypeOf$2(e,t){_setPrototypeOf$2=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$2(e,t)}var ne=function(e){_inheritsLoose$2(Universal,e);function Universal(t){var r;r=e.call(this,t)||this;r.type=re.UNIVERSAL;r.value="*";return r}return Universal}(te.default);ee.default=ne;ee=ee.default;var oe=ee;var ie={};ie.__esModule=true;ie.default=void 0;var se=_interopRequireDefault$5(e);var ae=t;function _interopRequireDefault$5(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose$1(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf$1(e,t)}function _setPrototypeOf$1(e,t){_setPrototypeOf$1=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf$1(e,t)}var ue=function(e){_inheritsLoose$1(Combinator,e);function Combinator(t){var r;r=e.call(this,t)||this;r.type=ae.COMBINATOR;return r}return Combinator}(se.default);ie.default=ue;ie=ie.default;var ce=ie;var le={};le.__esModule=true;le.default=void 0;var fe=_interopRequireDefault$4(e);var pe=t;function _interopRequireDefault$4(e){return e&&e.__esModule?e:{default:e}}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){e.__proto__=t;return e};return _setPrototypeOf(e,t)}var he=function(e){_inheritsLoose(Nesting,e);function Nesting(t){var r;r=e.call(this,t)||this;r.type=pe.NESTING;r.value="&";return r}return Nesting}(fe.default);le.default=he;le=le.default;var de=le;var ve={};ve.__esModule=true;ve.default=sortAscending;function sortAscending(e){return e.sort((function(e,t){return e-t}))}ve=ve.default;var _e=ve;var Se={};Se.__esModule=true;Se.combinator=Se.word=Se.comment=Se.str=Se.tab=Se.newline=Se.feed=Se.cr=Se.backslash=Se.bang=Se.slash=Se.doubleQuote=Se.singleQuote=Se.space=Se.greaterThan=Se.pipe=Se.equals=Se.plus=Se.caret=Se.tilde=Se.dollar=Se.closeSquare=Se.openSquare=Se.closeParenthesis=Se.openParenthesis=Se.semicolon=Se.colon=Se.comma=Se.at=Se.asterisk=Se.ampersand=void 0;var ye=38;Se.ampersand=ye;var Te=42;Se.asterisk=Te;var Pe=64;Se.at=Pe;var be=44;Se.comma=be;var Oe=58;Se.colon=Oe;var ke=59;Se.semicolon=ke;var ge=40;Se.openParenthesis=ge;var me=41;Se.closeParenthesis=me;var Ee=91;Se.openSquare=Ee;var we=93;Se.closeSquare=we;var De=36;Se.dollar=De;var Le=126;Se.tilde=Le;var Ie=94;Se.caret=Ie;var $e=43;Se.plus=$e;var Re=61;Se.equals=Re;var qe=124;Se.pipe=qe;var Ce=62;Se.greaterThan=Ce;var Ne=32;Se.space=Ne;var Ae=39;Se.singleQuote=Ae;var xe=34;Se.doubleQuote=xe;var Fe=47;Se.slash=Fe;var je=33;Se.bang=je;var Me=92;Se.backslash=Me;var We=13;Se.cr=We;var Ye=12;Se.feed=Ye;var Ue=10;Se.newline=Ue;var Be=9;Se.tab=Be;var Ge=Ae;Se.str=Ge;var Qe=-1;Se.comment=Qe;var Ve=-2;Se.word=Ve;var ze=-3;Se.combinator=ze;var He={};He.__esModule=true;He.default=tokenize;He.FIELDS=void 0;var Je=_interopRequireWildcard$2(Se);var Ke,Xe;function _getRequireWildcardCache$2(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;_getRequireWildcardCache$2=function _getRequireWildcardCache(){return e};return e}function _interopRequireWildcard$2(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=_getRequireWildcardCache$2();if(t&&t.has(e))return t.get(e);var r={};var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;t&&t.set(e,r);return r}var Ze=(Ke={},Ke[Je.tab]=true,Ke[Je.newline]=true,Ke[Je.cr]=true,Ke[Je.feed]=true,Ke);var et=(Xe={},Xe[Je.space]=true,Xe[Je.tab]=true,Xe[Je.newline]=true,Xe[Je.cr]=true,Xe[Je.feed]=true,Xe[Je.ampersand]=true,Xe[Je.asterisk]=true,Xe[Je.bang]=true,Xe[Je.comma]=true,Xe[Je.colon]=true,Xe[Je.semicolon]=true,Xe[Je.openParenthesis]=true,Xe[Je.closeParenthesis]=true,Xe[Je.openSquare]=true,Xe[Je.closeSquare]=true,Xe[Je.singleQuote]=true,Xe[Je.doubleQuote]=true,Xe[Je.plus]=true,Xe[Je.pipe]=true,Xe[Je.tilde]=true,Xe[Je.greaterThan]=true,Xe[Je.equals]=true,Xe[Je.dollar]=true,Xe[Je.caret]=true,Xe[Je.slash]=true,Xe);var tt={};var rt="0123456789abcdefABCDEF";for(var nt=0;nt<rt.length;nt++)tt[rt.charCodeAt(nt)]=true;
/**
 *  Returns the last index of the bar css word
 * @param {string} css The string in which the word begins
 * @param {number} start The index into the string where word's first letter occurs
 */function consumeWord(e,t){var r=t;var n;do{n=e.charCodeAt(r);if(et[n])return r-1;n===Je.backslash?r=consumeEscape(e,r)+1:r++}while(r<e.length);return r-1}
/**
 *  Returns the last index of the escape sequence
 * @param {string} css The string in which the sequence begins
 * @param {number} start The index into the string where escape character (`\`) occurs.
 */function consumeEscape(e,t){var r=t;var n=e.charCodeAt(r+1);if(Ze[n]);else if(tt[n]){var o=0;do{r++;o++;n=e.charCodeAt(r+1)}while(tt[n]&&o<6);o<6&&n===Je.space&&r++}else r++;return r}var ot={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6};He.FIELDS=ot;function tokenize(e){var t=[];var r=e.css.valueOf();var n=r,o=n.length;var i=-1;var s=1;var a=0;var u=0;var c,l,f,p,h,d,v,_,S,y,T,P,b;function unclosed(t,n){if(!e.safe)throw e.error("Unclosed "+t,s,a-i,a);r+=n;S=r.length-1}while(a<o){c=r.charCodeAt(a);if(c===Je.newline){i=a;s+=1}switch(c){case Je.space:case Je.tab:case Je.newline:case Je.cr:case Je.feed:S=a;do{S+=1;c=r.charCodeAt(S);if(c===Je.newline){i=S;s+=1}}while(c===Je.space||c===Je.newline||c===Je.tab||c===Je.cr||c===Je.feed);b=Je.space;p=s;f=S-i-1;u=S;break;case Je.plus:case Je.greaterThan:case Je.tilde:case Je.pipe:S=a;do{S+=1;c=r.charCodeAt(S)}while(c===Je.plus||c===Je.greaterThan||c===Je.tilde||c===Je.pipe);b=Je.combinator;p=s;f=a-i;u=S;break;case Je.asterisk:case Je.ampersand:case Je.bang:case Je.comma:case Je.equals:case Je.dollar:case Je.caret:case Je.openSquare:case Je.closeSquare:case Je.colon:case Je.semicolon:case Je.openParenthesis:case Je.closeParenthesis:S=a;b=c;p=s;f=a-i;u=S+1;break;case Je.singleQuote:case Je.doubleQuote:P=c===Je.singleQuote?"'":'"';S=a;do{h=false;S=r.indexOf(P,S+1);-1===S&&unclosed("quote",P);d=S;while(r.charCodeAt(d-1)===Je.backslash){d-=1;h=!h}}while(h);b=Je.str;p=s;f=a-i;u=S+1;break;default:if(c===Je.slash&&r.charCodeAt(a+1)===Je.asterisk){S=r.indexOf("*/",a+2)+1;0===S&&unclosed("comment","*/");l=r.slice(a,S+1);_=l.split("\n");v=_.length-1;if(v>0){y=s+v;T=S-_[v].length}else{y=s;T=i}b=Je.comment;s=y;p=y;f=S-T}else if(c===Je.slash){S=a;b=c;p=s;f=a-i;u=S+1}else{S=consumeWord(r,a);b=Je.word;p=s;f=S-i}u=S+1;break}t.push([b,s,a-i,p,f,a,u]);if(T){i=T;T=null}a=u}return t}var it={};it.__esModule=true;it.default=void 0;var st=_interopRequireDefault$3(v);var ut=_interopRequireDefault$3(P);var ct=_interopRequireDefault$3(D);var lt=_interopRequireDefault$3(q);var ft=_interopRequireDefault$3(F);var pt=_interopRequireDefault$3(U);var ht=_interopRequireDefault$3(z);var dt=_interopRequireDefault$3(Z);var vt=_interopRequireWildcard$1(n);var _t=_interopRequireDefault$3(oe);var St=_interopRequireDefault$3(ce);var yt=_interopRequireDefault$3(de);var Tt=_interopRequireDefault$3(_e);var Pt=_interopRequireWildcard$1(He);var bt=_interopRequireWildcard$1(Se);var Ot=_interopRequireWildcard$1(t);var kt=i;var gt,mt;function _getRequireWildcardCache$1(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;_getRequireWildcardCache$1=function _getRequireWildcardCache(){return e};return e}function _interopRequireWildcard$1(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=_getRequireWildcardCache$1();if(t&&t.has(e))return t.get(e);var r={};var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;t&&t.set(e,r);return r}function _interopRequireDefault$3(e){return e&&e.__esModule?e:{default:e}}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){t&&_defineProperties(e.prototype,t);r&&_defineProperties(e,r);return e}var Et=(gt={},gt[bt.space]=true,gt[bt.cr]=true,gt[bt.feed]=true,gt[bt.newline]=true,gt[bt.tab]=true,gt);var wt=Object.assign({},Et,(mt={},mt[bt.comment]=true,mt));function tokenStart(e){return{line:e[Pt.FIELDS.START_LINE],column:e[Pt.FIELDS.START_COL]}}function tokenEnd(e){return{line:e[Pt.FIELDS.END_LINE],column:e[Pt.FIELDS.END_COL]}}function getSource(e,t,r,n){return{start:{line:e,column:t},end:{line:r,column:n}}}function getTokenSource(e){return getSource(e[Pt.FIELDS.START_LINE],e[Pt.FIELDS.START_COL],e[Pt.FIELDS.END_LINE],e[Pt.FIELDS.END_COL])}function getTokenSourceSpan(e,t){if(e)return getSource(e[Pt.FIELDS.START_LINE],e[Pt.FIELDS.START_COL],t[Pt.FIELDS.END_LINE],t[Pt.FIELDS.END_COL])}function unescapeProp(e,t){var r=e[t];if("string"===typeof r){if(-1!==r.indexOf("\\")){(0,kt.ensureObject)(e,"raws");e[t]=(0,kt.unesc)(r);void 0===e.raws[t]&&(e.raws[t]=r)}return e}}function indexesOf(e,t){var r=-1;var n=[];while(-1!==(r=e.indexOf(t,r+1)))n.push(r);return n}function uniqs(){var e=Array.prototype.concat.apply([],arguments);return e.filter((function(t,r){return r===e.indexOf(t)}))}var Dt=function(){function Parser(e,t){void 0===t&&(t={});this.rule=e;this.options=Object.assign({lossy:false,safe:false},t);this.position=0;this.css="string"===typeof this.rule?this.rule:this.rule.selector;this.tokens=(0,Pt.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var r=getTokenSourceSpan(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new st.default({source:r});this.root.errorGenerator=this._errorGenerator();var n=new ut.default({source:{start:{line:1,column:1}}});this.root.append(n);this.current=n;this.loop()}var e=Parser.prototype;e._errorGenerator=function _errorGenerator(){var e=this;return function(t,r){return"string"===typeof e.rule?new Error(t):e.rule.error(t,r)}};e.attribute=function attribute(){var e=[];var t=this.currToken;this.position++;while(this.position<this.tokens.length&&this.currToken[Pt.FIELDS.TYPE]!==bt.closeSquare){e.push(this.currToken);this.position++}if(this.currToken[Pt.FIELDS.TYPE]!==bt.closeSquare)return this.expected("closing square bracket",this.currToken[Pt.FIELDS.START_POS]);var r=e.length;var n={source:getSource(t[1],t[2],this.currToken[3],this.currToken[4]),sourceIndex:t[Pt.FIELDS.START_POS]};if(1===r&&!~[bt.word].indexOf(e[0][Pt.FIELDS.TYPE]))return this.expected("attribute",e[0][Pt.FIELDS.START_POS]);var o=0;var i="";var s="";var a=null;var u=false;while(o<r){var c=e[o];var l=this.content(c);var f=e[o+1];switch(c[Pt.FIELDS.TYPE]){case bt.space:u=true;if(this.options.lossy)break;if(a){(0,kt.ensureObject)(n,"spaces",a);var p=n.spaces[a].after||"";n.spaces[a].after=p+l;var h=(0,kt.getProp)(n,"raws","spaces",a,"after")||null;h&&(n.raws.spaces[a].after=h+l)}else{i+=l;s+=l}break;case bt.asterisk:if(f[Pt.FIELDS.TYPE]===bt.equals){n.operator=l;a="operator"}else if((!n.namespace||"namespace"===a&&!u)&&f){if(i){(0,kt.ensureObject)(n,"spaces","attribute");n.spaces.attribute.before=i;i=""}if(s){(0,kt.ensureObject)(n,"raws","spaces","attribute");n.raws.spaces.attribute.before=i;s=""}n.namespace=(n.namespace||"")+l;var d=(0,kt.getProp)(n,"raws","namespace")||null;d&&(n.raws.namespace+=l);a="namespace"}u=false;break;case bt.dollar:if("value"===a){var v=(0,kt.getProp)(n,"raws","value");n.value+="$";v&&(n.raws.value=v+"$");break}case bt.caret:if(f[Pt.FIELDS.TYPE]===bt.equals){n.operator=l;a="operator"}u=false;break;case bt.combinator:if("~"===l&&f[Pt.FIELDS.TYPE]===bt.equals){n.operator=l;a="operator"}if("|"!==l){u=false;break}if(f[Pt.FIELDS.TYPE]===bt.equals){n.operator=l;a="operator"}else n.namespace||n.attribute||(n.namespace=true);u=false;break;case bt.word:if(f&&"|"===this.content(f)&&e[o+2]&&e[o+2][Pt.FIELDS.TYPE]!==bt.equals&&!n.operator&&!n.namespace){n.namespace=l;a="namespace"}else if(!n.attribute||"attribute"===a&&!u){if(i){(0,kt.ensureObject)(n,"spaces","attribute");n.spaces.attribute.before=i;i=""}if(s){(0,kt.ensureObject)(n,"raws","spaces","attribute");n.raws.spaces.attribute.before=s;s=""}n.attribute=(n.attribute||"")+l;var _=(0,kt.getProp)(n,"raws","attribute")||null;_&&(n.raws.attribute+=l);a="attribute"}else if(!n.value&&""!==n.value||"value"===a&&!u){var S=(0,kt.unesc)(l);var y=(0,kt.getProp)(n,"raws","value")||"";var T=n.value||"";n.value=T+S;n.quoteMark=null;if(S!==l||y){(0,kt.ensureObject)(n,"raws");n.raws.value=(y||T)+l}a="value"}else{var P="i"===l||"I"===l;if(!n.value&&""!==n.value||!n.quoteMark&&!u){if(n.value||""===n.value){a="value";n.value+=l;n.raws.value&&(n.raws.value+=l)}}else{n.insensitive=P;if(!P||"I"===l){(0,kt.ensureObject)(n,"raws");n.raws.insensitiveFlag=l}a="insensitive";if(i){(0,kt.ensureObject)(n,"spaces","insensitive");n.spaces.insensitive.before=i;i=""}if(s){(0,kt.ensureObject)(n,"raws","spaces","insensitive");n.raws.spaces.insensitive.before=s;s=""}}}u=false;break;case bt.str:if(!n.attribute||!n.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:c[Pt.FIELDS.START_POS]});var b=(0,vt.unescapeValue)(l),O=b.unescaped,k=b.quoteMark;n.value=O;n.quoteMark=k;a="value";(0,kt.ensureObject)(n,"raws");n.raws.value=l;u=false;break;case bt.equals:if(!n.attribute)return this.expected("attribute",c[Pt.FIELDS.START_POS],l);if(n.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:c[Pt.FIELDS.START_POS]});n.operator=n.operator?n.operator+l:l;a="operator";u=false;break;case bt.comment:if(a)if(u||f&&f[Pt.FIELDS.TYPE]===bt.space||"insensitive"===a){var g=(0,kt.getProp)(n,"spaces",a,"after")||"";var m=(0,kt.getProp)(n,"raws","spaces",a,"after")||g;(0,kt.ensureObject)(n,"raws","spaces",a);n.raws.spaces[a].after=m+l}else{var E=n[a]||"";var w=(0,kt.getProp)(n,"raws",a)||E;(0,kt.ensureObject)(n,"raws");n.raws[a]=w+l}else s+=l;break;default:return this.error('Unexpected "'+l+'" found.',{index:c[Pt.FIELDS.START_POS]})}o++}unescapeProp(n,"attribute");unescapeProp(n,"namespace");this.newNode(new vt.default(n));this.position++};e.parseWhitespaceEquivalentTokens=function parseWhitespaceEquivalentTokens(e){e<0&&(e=this.tokens.length);var t=this.position;var r=[];var n="";var o=void 0;do{if(Et[this.currToken[Pt.FIELDS.TYPE]])this.options.lossy||(n+=this.content());else if(this.currToken[Pt.FIELDS.TYPE]===bt.comment){var i={};if(n){i.before=n;n=""}o=new lt.default({value:this.content(),source:getTokenSource(this.currToken),sourceIndex:this.currToken[Pt.FIELDS.START_POS],spaces:i});r.push(o)}}while(++this.position<e);if(n)if(o)o.spaces.after=n;else if(!this.options.lossy){var s=this.tokens[t];var a=this.tokens[this.position-1];r.push(new ht.default({value:"",source:getSource(s[Pt.FIELDS.START_LINE],s[Pt.FIELDS.START_COL],a[Pt.FIELDS.END_LINE],a[Pt.FIELDS.END_COL]),sourceIndex:s[Pt.FIELDS.START_POS],spaces:{before:n,after:""}}))}return r}
/**
   * 
   * @param {*} nodes 
   */;e.convertWhitespaceNodesToSpace=function convertWhitespaceNodesToSpace(e,t){var r=this;void 0===t&&(t=false);var n="";var o="";e.forEach((function(e){var i=r.lossySpace(e.spaces.before,t);var s=r.lossySpace(e.rawSpaceBefore,t);n+=i+r.lossySpace(e.spaces.after,t&&0===i.length);o+=i+e.value+r.lossySpace(e.rawSpaceAfter,t&&0===s.length)}));o===n&&(o=void 0);var i={space:n,rawSpace:o};return i};e.isNamedCombinator=function isNamedCombinator(e){void 0===e&&(e=this.position);return this.tokens[e+0]&&this.tokens[e+0][Pt.FIELDS.TYPE]===bt.slash&&this.tokens[e+1]&&this.tokens[e+1][Pt.FIELDS.TYPE]===bt.word&&this.tokens[e+2]&&this.tokens[e+2][Pt.FIELDS.TYPE]===bt.slash};e.namedCombinator=function namedCombinator(){if(this.isNamedCombinator()){var e=this.content(this.tokens[this.position+1]);var t=(0,kt.unesc)(e).toLowerCase();var r={};t!==e&&(r.value="/"+e+"/");var n=new St.default({value:"/"+t+"/",source:getSource(this.currToken[Pt.FIELDS.START_LINE],this.currToken[Pt.FIELDS.START_COL],this.tokens[this.position+2][Pt.FIELDS.END_LINE],this.tokens[this.position+2][Pt.FIELDS.END_COL]),sourceIndex:this.currToken[Pt.FIELDS.START_POS],raws:r});this.position=this.position+3;return n}this.unexpected()};e.combinator=function combinator(){var e=this;if("|"===this.content())return this.namespace();var t=this.locateNextMeaningfulToken(this.position);if(!(t<0||this.tokens[t][Pt.FIELDS.TYPE]===bt.comma)){var r=this.currToken;var n=void 0;t>this.position&&(n=this.parseWhitespaceEquivalentTokens(t));var o;if(this.isNamedCombinator())o=this.namedCombinator();else if(this.currToken[Pt.FIELDS.TYPE]===bt.combinator){o=new St.default({value:this.content(),source:getTokenSource(this.currToken),sourceIndex:this.currToken[Pt.FIELDS.START_POS]});this.position++}else Et[this.currToken[Pt.FIELDS.TYPE]]||n||this.unexpected();if(o){if(n){var i=this.convertWhitespaceNodesToSpace(n),s=i.space,a=i.rawSpace;o.spaces.before=s;o.rawSpaceBefore=a}}else{var u=this.convertWhitespaceNodesToSpace(n,true),c=u.space,l=u.rawSpace;l||(l=c);var f={};var p={spaces:{}};if(c.endsWith(" ")&&l.endsWith(" ")){f.before=c.slice(0,c.length-1);p.spaces.before=l.slice(0,l.length-1)}else if(c.startsWith(" ")&&l.startsWith(" ")){f.after=c.slice(1);p.spaces.after=l.slice(1)}else p.value=l;o=new St.default({value:" ",source:getTokenSourceSpan(r,this.tokens[this.position-1]),sourceIndex:r[Pt.FIELDS.START_POS],spaces:f,raws:p})}if(this.currToken&&this.currToken[Pt.FIELDS.TYPE]===bt.space){o.spaces.after=this.optionalSpace(this.content());this.position++}return this.newNode(o)}var h=this.parseWhitespaceEquivalentTokens(t);if(h.length>0){var d=this.current.last;if(d){var v=this.convertWhitespaceNodesToSpace(h),_=v.space,S=v.rawSpace;void 0!==S&&(d.rawSpaceAfter+=S);d.spaces.after+=_}else h.forEach((function(t){return e.newNode(t)}))}};e.comma=function comma(){if(this.position!==this.tokens.length-1){this.current._inferEndPosition();var e=new ut.default({source:{start:tokenStart(this.tokens[this.position+1])}});this.current.parent.append(e);this.current=e;this.position++}else{this.root.trailingComma=true;this.position++}};e.comment=function comment(){var e=this.currToken;this.newNode(new lt.default({value:this.content(),source:getTokenSource(e),sourceIndex:e[Pt.FIELDS.START_POS]}));this.position++};e.error=function error(e,t){throw this.root.error(e,t)};e.missingBackslash=function missingBackslash(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[Pt.FIELDS.START_POS]})};e.missingParenthesis=function missingParenthesis(){return this.expected("opening parenthesis",this.currToken[Pt.FIELDS.START_POS])};e.missingSquareBracket=function missingSquareBracket(){return this.expected("opening square bracket",this.currToken[Pt.FIELDS.START_POS])};e.unexpected=function unexpected(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[Pt.FIELDS.START_POS])};e.namespace=function namespace(){var e=this.prevToken&&this.content(this.prevToken)||true;if(this.nextToken[Pt.FIELDS.TYPE]===bt.word){this.position++;return this.word(e)}if(this.nextToken[Pt.FIELDS.TYPE]===bt.asterisk){this.position++;return this.universal(e)}};e.nesting=function nesting(){if(this.nextToken){var e=this.content(this.nextToken);if("|"===e){this.position++;return}}var t=this.currToken;this.newNode(new yt.default({value:this.content(),source:getTokenSource(t),sourceIndex:t[Pt.FIELDS.START_POS]}));this.position++};e.parentheses=function parentheses(){var e=this.current.last;var t=1;this.position++;if(e&&e.type===Ot.PSEUDO){var r=new ut.default({source:{start:tokenStart(this.tokens[this.position-1])}});var n=this.current;e.append(r);this.current=r;while(this.position<this.tokens.length&&t){this.currToken[Pt.FIELDS.TYPE]===bt.openParenthesis&&t++;this.currToken[Pt.FIELDS.TYPE]===bt.closeParenthesis&&t--;if(t)this.parse();else{this.current.source.end=tokenEnd(this.currToken);this.current.parent.source.end=tokenEnd(this.currToken);this.position++}}this.current=n}else{var o=this.currToken;var i="(";var s;while(this.position<this.tokens.length&&t){this.currToken[Pt.FIELDS.TYPE]===bt.openParenthesis&&t++;this.currToken[Pt.FIELDS.TYPE]===bt.closeParenthesis&&t--;s=this.currToken;i+=this.parseParenthesisToken(this.currToken);this.position++}e?e.appendToPropertyAndEscape("value",i,i):this.newNode(new ht.default({value:i,source:getSource(o[Pt.FIELDS.START_LINE],o[Pt.FIELDS.START_COL],s[Pt.FIELDS.END_LINE],s[Pt.FIELDS.END_COL]),sourceIndex:o[Pt.FIELDS.START_POS]}))}if(t)return this.expected("closing parenthesis",this.currToken[Pt.FIELDS.START_POS])};e.pseudo=function pseudo(){var e=this;var t="";var r=this.currToken;while(this.currToken&&this.currToken[Pt.FIELDS.TYPE]===bt.colon){t+=this.content();this.position++}if(!this.currToken)return this.expected(["pseudo-class","pseudo-element"],this.position-1);if(this.currToken[Pt.FIELDS.TYPE]!==bt.word)return this.expected(["pseudo-class","pseudo-element"],this.currToken[Pt.FIELDS.START_POS]);this.splitWord(false,(function(n,o){t+=n;e.newNode(new dt.default({value:t,source:getTokenSourceSpan(r,e.currToken),sourceIndex:r[Pt.FIELDS.START_POS]}));o>1&&e.nextToken&&e.nextToken[Pt.FIELDS.TYPE]===bt.openParenthesis&&e.error("Misplaced parenthesis.",{index:e.nextToken[Pt.FIELDS.START_POS]})}))};e.space=function space(){var e=this.content();if(0===this.position||this.prevToken[Pt.FIELDS.TYPE]===bt.comma||this.prevToken[Pt.FIELDS.TYPE]===bt.openParenthesis||this.current.nodes.every((function(e){return"comment"===e.type}))){this.spaces=this.optionalSpace(e);this.position++}else if(this.position===this.tokens.length-1||this.nextToken[Pt.FIELDS.TYPE]===bt.comma||this.nextToken[Pt.FIELDS.TYPE]===bt.closeParenthesis){this.current.last.spaces.after=this.optionalSpace(e);this.position++}else this.combinator()};e.string=function string(){var e=this.currToken;this.newNode(new ht.default({value:this.content(),source:getTokenSource(e),sourceIndex:e[Pt.FIELDS.START_POS]}));this.position++};e.universal=function universal(e){var t=this.nextToken;if(t&&"|"===this.content(t)){this.position++;return this.namespace()}var r=this.currToken;this.newNode(new _t.default({value:this.content(),source:getTokenSource(r),sourceIndex:r[Pt.FIELDS.START_POS]}),e);this.position++};e.splitWord=function splitWord(e,t){var r=this;var n=this.nextToken;var o=this.content();while(n&&~[bt.dollar,bt.caret,bt.equals,bt.word].indexOf(n[Pt.FIELDS.TYPE])){this.position++;var i=this.content();o+=i;if(i.lastIndexOf("\\")===i.length-1){var s=this.nextToken;if(s&&s[Pt.FIELDS.TYPE]===bt.space){o+=this.requiredSpace(this.content(s));this.position++}}n=this.nextToken}var a=indexesOf(o,".").filter((function(e){var t="\\"===o[e-1];var r=/^\d+\.\d+%$/.test(o);return!t&&!r}));var u=indexesOf(o,"#").filter((function(e){return"\\"!==o[e-1]}));var c=indexesOf(o,"#{");c.length&&(u=u.filter((function(e){return!~c.indexOf(e)})));var l=(0,Tt.default)(uniqs([0].concat(a,u)));l.forEach((function(n,i){var s=l[i+1]||o.length;var c=o.slice(n,s);if(0===i&&t)return t.call(r,c,l.length);var f;var p=r.currToken;var h=p[Pt.FIELDS.START_POS]+l[i];var d=getSource(p[1],p[2]+n,p[3],p[2]+(s-1));if(~a.indexOf(n)){var v={value:c.slice(1),source:d,sourceIndex:h};f=new ct.default(unescapeProp(v,"value"))}else if(~u.indexOf(n)){var _={value:c.slice(1),source:d,sourceIndex:h};f=new ft.default(unescapeProp(_,"value"))}else{var S={value:c,source:d,sourceIndex:h};unescapeProp(S,"value");f=new pt.default(S)}r.newNode(f,e);e=null}));this.position++};e.word=function word(e){var t=this.nextToken;if(t&&"|"===this.content(t)){this.position++;return this.namespace()}return this.splitWord(e)};e.loop=function loop(){while(this.position<this.tokens.length)this.parse(true);this.current._inferEndPosition();return this.root};e.parse=function parse(e){switch(this.currToken[Pt.FIELDS.TYPE]){case bt.space:this.space();break;case bt.comment:this.comment();break;case bt.openParenthesis:this.parentheses();break;case bt.closeParenthesis:e&&this.missingParenthesis();break;case bt.openSquare:this.attribute();break;case bt.dollar:case bt.caret:case bt.equals:case bt.word:this.word();break;case bt.colon:this.pseudo();break;case bt.comma:this.comma();break;case bt.asterisk:this.universal();break;case bt.ampersand:this.nesting();break;case bt.slash:case bt.combinator:this.combinator();break;case bt.str:this.string();break;case bt.closeSquare:this.missingSquareBracket();case bt.semicolon:this.missingBackslash();default:this.unexpected()}};e.expected=function expected(e,t,r){if(Array.isArray(e)){var n=e.pop();e=e.join(", ")+" or "+n}var o=/^[aeiou]/.test(e[0])?"an":"a";return r?this.error("Expected "+o+" "+e+', found "'+r+'" instead.',{index:t}):this.error("Expected "+o+" "+e+".",{index:t})};e.requiredSpace=function requiredSpace(e){return this.options.lossy?" ":e};e.optionalSpace=function optionalSpace(e){return this.options.lossy?"":e};e.lossySpace=function lossySpace(e,t){return this.options.lossy?t?" ":"":e};e.parseParenthesisToken=function parseParenthesisToken(e){var t=this.content(e);return e[Pt.FIELDS.TYPE]===bt.space?this.requiredSpace(t):t};e.newNode=function newNode(e,t){if(t){if(/^ +$/.test(t)){this.options.lossy||(this.spaces=(this.spaces||"")+t);t=true}e.namespace=t;unescapeProp(e,"namespace")}if(this.spaces){e.spaces.before=this.spaces;this.spaces=""}return this.current.append(e)};e.content=function content(e){void 0===e&&(e=this.currToken);return this.css.slice(e[Pt.FIELDS.START_POS],e[Pt.FIELDS.END_POS])};e.locateNextMeaningfulToken=function locateNextMeaningfulToken(e){void 0===e&&(e=this.position+1);var t=e;while(t<this.tokens.length){if(!wt[this.tokens[t][Pt.FIELDS.TYPE]])return t;t++}return-1};_createClass(Parser,[{key:"currToken",get:function get(){return this.tokens[this.position]}},{key:"nextToken",get:function get(){return this.tokens[this.position+1]}},{key:"prevToken",get:function get(){return this.tokens[this.position-1]}}]);return Parser}();it.default=Dt;it=it.default;var Lt=it;var It={};It.__esModule=true;It.default=void 0;var $t=_interopRequireDefault$2(Lt);function _interopRequireDefault$2(e){return e&&e.__esModule?e:{default:e}}var Rt=function(){function Processor(e,t){this.func=e||function noop(){};this.funcRes=null;this.options=t}var e=Processor.prototype;e._shouldUpdateSelector=function _shouldUpdateSelector(e,t){void 0===t&&(t={});var r=Object.assign({},this.options,t);return false!==r.updateSelector&&"string"!==typeof e};e._isLossy=function _isLossy(e){void 0===e&&(e={});var t=Object.assign({},this.options,e);return false===t.lossless};e._root=function _root(e,t){void 0===t&&(t={});var r=new $t.default(e,this._parseOptions(t));return r.root};e._parseOptions=function _parseOptions(e){return{lossy:this._isLossy(e)}};e._run=function _run(e,t){var r=this;void 0===t&&(t={});return new Promise((function(n,o){try{var i=r._root(e,t);Promise.resolve(r.func(i)).then((function(n){var o=void 0;if(r._shouldUpdateSelector(e,t)){o=i.toString();e.selector=o}return{transform:n,root:i,string:o}})).then(n,o)}catch(e){o(e);return}}))};e._runSync=function _runSync(e,t){void 0===t&&(t={});var r=this._root(e,t);var n=this.func(r);if(n&&"function"===typeof n.then)throw new Error("Selector processor returned a promise to a synchronous call.");var o=void 0;if(t.updateSelector&&"string"!==typeof e){o=r.toString();e.selector=o}return{transform:n,root:r,string:o}}
/**
   * Process rule into a selector AST.
   *
   * @param rule {postcss.Rule | string} The css selector to be processed
   * @param options The options for processing
   * @returns {Promise<parser.Root>} The AST of the selector after processing it.
   */;e.ast=function ast(e,t){return this._run(e,t).then((function(e){return e.root}))}
/**
   * Process rule into a selector AST synchronously.
   *
   * @param rule {postcss.Rule | string} The css selector to be processed
   * @param options The options for processing
   * @returns {parser.Root} The AST of the selector after processing it.
   */;e.astSync=function astSync(e,t){return this._runSync(e,t).root}
/**
   * Process a selector into a transformed value asynchronously
   *
   * @param rule {postcss.Rule | string} The css selector to be processed
   * @param options The options for processing
   * @returns {Promise<any>} The value returned by the processor.
   */;e.transform=function transform(e,t){return this._run(e,t).then((function(e){return e.transform}))}
/**
   * Process a selector into a transformed value synchronously.
   *
   * @param rule {postcss.Rule | string} The css selector to be processed
   * @param options The options for processing
   * @returns {any} The value returned by the processor.
   */;e.transformSync=function transformSync(e,t){return this._runSync(e,t).transform}
/**
   * Process a selector into a new selector string asynchronously.
   *
   * @param rule {postcss.Rule | string} The css selector to be processed
   * @param options The options for processing
   * @returns {string} the selector after processing.
   */;e.process=function process(e,t){return this._run(e,t).then((function(e){return e.string||e.root.toString()}))}
/**
   * Process a selector into a new selector string synchronously.
   *
   * @param rule {postcss.Rule | string} The css selector to be processed
   * @param options The options for processing
   * @returns {string} the selector after processing.
   */;e.processSync=function processSync(e,t){var r=this._runSync(e,t);return r.string||r.root.toString()};return Processor}();It.default=Rt;It=It.default;var qt=It;var Ct={};Ct.__esModule=true;Ct.universal=Ct.tag=Ct.string=Ct.selector=Ct.root=Ct.pseudo=Ct.nesting=Ct.id=Ct.comment=Ct.combinator=Ct.className=Ct.attribute=void 0;var Nt=_interopRequireDefault$1(n);var At=_interopRequireDefault$1(D);var xt=_interopRequireDefault$1(ce);var Ft=_interopRequireDefault$1(q);var jt=_interopRequireDefault$1(F);var Mt=_interopRequireDefault$1(de);var Wt=_interopRequireDefault$1(Z);var Yt=_interopRequireDefault$1(v);var Ut=_interopRequireDefault$1(P);var Bt=_interopRequireDefault$1(z);var Gt=_interopRequireDefault$1(U);var Qt=_interopRequireDefault$1(oe);function _interopRequireDefault$1(e){return e&&e.__esModule?e:{default:e}}var Vt=function attribute(e){return new Nt.default(e)};Ct.attribute=Vt;var zt=function className(e){return new At.default(e)};Ct.className=zt;var Ht=function combinator(e){return new xt.default(e)};Ct.combinator=Ht;var Jt=function comment(e){return new Ft.default(e)};Ct.comment=Jt;var Kt=function id(e){return new jt.default(e)};Ct.id=Kt;var Xt=function nesting(e){return new Mt.default(e)};Ct.nesting=Xt;var Zt=function pseudo(e){return new Wt.default(e)};Ct.pseudo=Zt;var er=function root(e){return new Yt.default(e)};Ct.root=er;var tr=function selector(e){return new Ut.default(e)};Ct.selector=tr;var rr=function string(e){return new Bt.default(e)};Ct.string=rr;var nr=function tag(e){return new Gt.default(e)};Ct.tag=nr;var or=function universal(e){return new Qt.default(e)};Ct.universal=or;var ir={};ir.__esModule=true;ir.isNode=isNode;ir.isPseudoElement=isPseudoElement;ir.isPseudoClass=isPseudoClass;ir.isContainer=isContainer;ir.isNamespace=isNamespace;ir.isUniversal=ir.isTag=ir.isString=ir.isSelector=ir.isRoot=ir.isPseudo=ir.isNesting=ir.isIdentifier=ir.isComment=ir.isCombinator=ir.isClassName=ir.isAttribute=void 0;var sr=t;var ar;var ur=(ar={},ar[sr.ATTRIBUTE]=true,ar[sr.CLASS]=true,ar[sr.COMBINATOR]=true,ar[sr.COMMENT]=true,ar[sr.ID]=true,ar[sr.NESTING]=true,ar[sr.PSEUDO]=true,ar[sr.ROOT]=true,ar[sr.SELECTOR]=true,ar[sr.STRING]=true,ar[sr.TAG]=true,ar[sr.UNIVERSAL]=true,ar);function isNode(e){return"object"===typeof e&&ur[e.type]}function isNodeType(e,t){return isNode(t)&&t.type===e}var cr=isNodeType.bind(null,sr.ATTRIBUTE);ir.isAttribute=cr;var lr=isNodeType.bind(null,sr.CLASS);ir.isClassName=lr;var fr=isNodeType.bind(null,sr.COMBINATOR);ir.isCombinator=fr;var pr=isNodeType.bind(null,sr.COMMENT);ir.isComment=pr;var hr=isNodeType.bind(null,sr.ID);ir.isIdentifier=hr;var dr=isNodeType.bind(null,sr.NESTING);ir.isNesting=dr;var vr=isNodeType.bind(null,sr.PSEUDO);ir.isPseudo=vr;var _r=isNodeType.bind(null,sr.ROOT);ir.isRoot=_r;var Sr=isNodeType.bind(null,sr.SELECTOR);ir.isSelector=Sr;var yr=isNodeType.bind(null,sr.STRING);ir.isString=yr;var Tr=isNodeType.bind(null,sr.TAG);ir.isTag=Tr;var Pr=isNodeType.bind(null,sr.UNIVERSAL);ir.isUniversal=Pr;function isPseudoElement(e){return vr(e)&&e.value&&(e.value.startsWith("::")||":before"===e.value.toLowerCase()||":after"===e.value.toLowerCase()||":first-letter"===e.value.toLowerCase()||":first-line"===e.value.toLowerCase())}function isPseudoClass(e){return vr(e)&&!isPseudoElement(e)}function isContainer(e){return!!(isNode(e)&&e.walk)}function isNamespace(e){return cr(e)||Tr(e)}var br={};br.__esModule=true;var Or=t;Object.keys(Or).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in br&&br[e]===Or[e]||(br[e]=Or[e]))}));var kr=Ct;Object.keys(kr).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in br&&br[e]===kr[e]||(br[e]=kr[e]))}));var gr=ir;Object.keys(gr).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in br&&br[e]===gr[e]||(br[e]=gr[e]))}));var mr={};mr.__esModule=true;mr.default=void 0;var Er=_interopRequireDefault(qt);var wr=_interopRequireWildcard(br);function _getRequireWildcardCache(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return e};return e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r={};var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e;t&&t.set(e,r);return r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Dr=function parser(e){return new Er.default(e)};Object.assign(Dr,wr);delete Dr.__esModule;var Lr=Dr;mr.default=Lr;mr=mr.default;var Ir=mr;const $r=mr.__esModule;export{$r as __esModule,Ir as default};

